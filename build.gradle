buildscript {
    repositories {
        jcenter()
        maven {
            url 'http://repo.jenkins-ci.org/releases/'
        }
    }
    dependencies {
        classpath 'org.jenkins-ci.tools:gradle-jpi-plugin:0.13.0'
    }
}

apply plugin: 'groovy'
apply plugin: 'org.jenkins-ci.jpi'

description = 'Jenkins plugin to leverage job-dsl-core to programmatic create jobs from inside Jenkins.'
group = 'hudson.plugin.jenkinstrigger'

// keep the generated sources outside of the build directory, see http://stackoverflow.com/a/21003914/1271460
def generatedSourcesDir = 'generated'

jenkinsPlugin {
    coreVersion = '1.609'
    displayName = 'Simple Push Trigger'
    //url = 'https://wiki.jenkins-ci.org/display/JENKINS/Job+DSL+Plugin'
    //gitHubUrl = 'https://github.com/jenkinsci/job-dsl-plugin'
    localizerOutputDir = "$generatedSourcesDir/localizer"
    developers {
        developer {
            id 'carstenlenz'
            name 'Carsten Lenz'
            email 'carsten.lenz@aoe.com'
        }
    }
}

clean {
    delete generatedSourcesDir
}

test {
    // workaround for JENKINS-4409 to avoid leaking files into the system temp directory
    systemProperty 'java.io.tmpdir', temporaryDir.absolutePath
}

dependencies {
    compile 'org.codehaus.groovy:groovy-all:1.8.9'
    jenkinsPlugins 'org.jenkins-ci.plugins:rabbitmq-consumer:2.5@jar'
}
